(this["webpackJsonpcapstone-frontend"]=this["webpackJsonpcapstone-frontend"]||[]).push([[0],{31:function(e,t,n){e.exports=n(94)},36:function(e,t,n){},83:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(28),o=n.n(r),c=(n(36),n(3)),i=n(29),s=n.n(i),u=n(6),m=n.n(u),p=(n(83),function(e){return l.a.createElement("div",{id:"homepage"},l.a.createElement("header",null,l.a.createElement("h1",null,"the travel mApp")),l.a.createElement("main",null,l.a.createElement(s.a,{authCallback:function(t,n){console.log({err:t},{data:n}),console.log(n.screen_name),m()({method:"post",url:"https://the-travel-mapp.herokuapp.com/users",params:{username:n.screen_name},headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.setUserCallback(n.screen_name),e.setUserInformationCallback(t.data.trips)})).catch((function(e){console.log(e)}))},consumerKey:"luVu8KaYbTvMVCVkgs0wLT48J",consumerSecret:"ySQwiAO5SUC64bbv8tVitaBzoqbY9KfZbjiOj9nekl21CLK6RS",callbackUrl:"https://the-travel-mapp.herokuapp.com/"})),l.a.createElement("footer",null,l.a.createElement("p",null,"Jessica made this.")))}),d=n(5),f=n(30),h=n(8),E=n.n(h),b=(n(84),n(85),{width:"90vw",height:"65vh",overflow:"hidden"}),g=function(e){var t=e.userInformation,n=e.coordinates,r=Object(a.useState)(null),o=Object(c.a)(r,2),i=o[0],s=o[1],u=Object(a.useState)([]),m=Object(c.a)(u,2),p=m[0],d=(m[1],Object(a.useRef)(null));return Object(a.useEffect)((function(){E.a.accessToken="pk.eyJ1IjoiamVzc2ljYWxpYW5nIiwiYSI6ImNrY2I3N25wazFpOGEzMHF0dHY3aHNkOWUifQ.ItSK1BDpYydbUVyDPvdj6A";i||function(e){var a=e.setMap,l=e.mapContainer,r=new E.a.Map({container:l.current,style:"mapbox://styles/jessicaliang/ckcb79d7d5vit1jq928rxsova",center:[0,16],zoom:1});r.on("load",(function(){a(r),r.resize(),console.log({coordinates:n});for(var e=0;e<n.length;e++)for(var l=0;l<n[e].length;l++){var o=document.createElement("div");o.style.backgroundImage="url(".concat(n[e][l][1],")"),o.style.width="75px",o.style.height="75px",o.className="marker";var c=new E.a.Popup({offset:40}).setText(t[e].places[l][0].toUpperCase());p.push(new E.a.Marker(o).setLngLat(n[e][l][0]).setPopup(c).addTo(r))}}))}({setMap:s,mapContainer:d})}),[i]),Object(a.useEffect)((function(){if(i){console.log({coordinates:n}),console.log({userInformation:t}),p.forEach((function(e){e.remove()})),p.length=0,console.log({mapMarkers:p});for(var e=0;e<n.length;e++)for(var a=0;a<n[e].length;a++){var l=document.createElement("div");l.style.backgroundImage="url(".concat(n[e][a][1],")"),l.style.width="75px",l.style.height="75px",l.className="marker";var r=new E.a.Popup({offset:40}).setText(t[e].places[a][0].toUpperCase());p.push(new E.a.Marker(l).setLngLat(n[e][a][0]).setPopup(r).addTo(i))}}}),[n,i]),l.a.createElement("div",{ref:function(e){return d.current=e},style:b})},v=(n(86),function(e){return l.a.createElement("div",{className:"map-container"},l.a.createElement(g,e))}),C=n(14),k=(n(87),function(e){var t=e.index,n=e.title,r=e.date,o=e.tripPlaces,i=e.editTripCallback,s=e.setToggleEdit,u=Object(a.useState)({title:n,date:r}),m=Object(c.a)(u,2),p=m[0],f=m[1],h=Object(a.useState)(o),E=Object(c.a)(h,2),b=E[0],g=E[1],v=function(e){var t=Object(C.a)({},p);t[e.target.name]=e.target.value,f(t)},k=function(e){e.preventDefault(),s(!1),console.log(b),console.log(p),i(p,b,t)};return l.a.createElement("div",{className:"edit_trip_form_container"},l.a.createElement("h2",null,"Edit"),l.a.createElement("form",{onSubmit:k},l.a.createElement("section",null,l.a.createElement("label",null,l.a.createElement("strong",null,"Title "),l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:p.title,name:"title",onChange:v,maxLength:"26",required:!0}))),l.a.createElement("section",null,l.a.createElement("label",null,l.a.createElement("strong",null,"Date "),l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:p.date,name:"date",onChange:v,pattern:"\\d{1,2}-\\d{4}",maxLength:"7",required:!0}))),l.a.createElement("section",null,l.a.createElement("label",null,l.a.createElement("strong",null,"Places "),l.a.createElement("br",null),b.map((function(e,t){return l.a.createElement("section",{key:t},l.a.createElement("input",{type:"text",value:e[0],onChange:function(e){return function(e,t){var n=Object(d.a)(b);n[t][0]=e.target.value,g(n)}(e,t)},maxLength:"26",required:!0}),l.a.createElement("input",{type:"text",value:e[1],onChange:function(e){return function(e,t){var n=Object(d.a)(b);n[t][1]=e.target.value,g(n)}(e,t)},maxLength:"100",required:!0}),l.a.createElement("button",{onClick:function(e){return function(e,t){e.preventDefault();var n=Object(d.a)(b);n.splice(t,1),g(n)}(e,t)}},"X"))})))),l.a.createElement("section",null,l.a.createElement("button",{onClick:function(e){e.preventDefault();var t=Object(d.a)(b);t.push(["",""]),g(t)}},"Add Place"),l.a.createElement("button",{onClick:function(){return s(!1)}},"Close"),l.a.createElement("input",{type:"submit",value:"Save",onSubmit:k}))))}),O=(n(88),function(e){var t=e.index,n=e.title,r=e.date,o=e.places,i=e.editTripCallback,s=e.deleteTripCallback,u=Object(a.useState)(!1),m=Object(c.a)(u,2),p=m[0],d=m[1];return l.a.createElement("section",{className:"trip_listing_container"},!1===p?l.a.createElement("section",null,l.a.createElement("h2",null,n),l.a.createElement("p",{className:"trip_listing_container--date"},l.a.createElement("em",null,r)),l.a.createElement("h3",null,"Places"),l.a.createElement("p",{className:"trip_listing_container--places-container"},o),l.a.createElement("p",null,l.a.createElement("button",{onClick:function(){return d(!0)}},"Edit"),l.a.createElement("button",{onClick:function(){window.confirm("Are you sure you wish to delete this item?")&&s(t)}},"X"))):l.a.createElement(k,{key:t,index:t,title:n,date:r,tripPlaces:o,editTripCallback:i,setToggleEdit:d}))}),T=(n(89),function(e){var t;return t=e.userInformation.map((function(t,n){return l.a.createElement(O,{key:n,index:n,title:t.title,date:t.date,places:t.places,editTripCallback:e.editTripCallback,deleteTripCallback:e.deleteTripCallback})})),l.a.createElement("div",{className:"all-trips-container"},l.a.createElement("h1",null,"Your Trips"),t)}),j=(n(90),function(e){var t=Object(a.useState)({title:"",month:"",year:""}),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)([["",""]]),s=Object(c.a)(i,2),u=s[0],m=s[1],p=function(e){var t=Object(C.a)({},r);t[e.target.name]=e.target.value,o(t)},f=function(t){t.preventDefault(),console.log(u),console.log(r),e.addNewTripCallback(r,u),o({title:"",month:"",year:""}),m([["",""]])};return l.a.createElement("div",{className:"new_trip_form_container"},l.a.createElement("h2",null,"Add a New Trip"),l.a.createElement("form",{onSubmit:f},l.a.createElement("section",{className:"new_trip_form_container--title"},l.a.createElement("label",null,l.a.createElement("strong",null,"Title "),l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:r.title,name:"title",onChange:p,maxLength:"26",required:!0}))),l.a.createElement("section",{className:"new_trip_form_container--date"},l.a.createElement("label",null,l.a.createElement("strong",null,"Date "),l.a.createElement("br",null),l.a.createElement("input",{type:"text",placeholder:"month",value:r.month,name:"month",onChange:p,pattern:"\\d*",maxLength:"2",required:!0})," /",l.a.createElement("input",{type:"text",placeholder:"year",value:r.year,name:"year",onChange:p,pattern:"\\d*",maxLength:"4",required:!0}))),l.a.createElement("section",{className:"new_trip_form_container--places"},l.a.createElement("label",null,l.a.createElement("strong",null,"Places "),l.a.createElement("br",null),u.map((function(e,t){return l.a.createElement("section",{key:t},l.a.createElement("input",{type:"text",value:e[0],onChange:function(e){return function(e,t){var n=Object(d.a)(u);n[t][0]=e.target.value,m(n)}(e,t)},maxLength:"26",required:!0}),l.a.createElement("input",{type:"text",value:e[1],onChange:function(e){return function(e,t){var n=Object(d.a)(u);n[t][1]=e.target.value,m(n)}(e,t)},maxLength:"100",required:!0}),l.a.createElement("button",{onClick:function(e){return function(e,t){e.preventDefault();var n=Object(d.a)(u);n.splice(t,1),m(n)}(e,t)}},"X"))})))),l.a.createElement("section",{className:"new_trip_form_container--buttons"},l.a.createElement("button",{onClick:function(e){e.preventDefault();var t=Object(d.a)(u);t.push(["",""]),m(t)}},"Add Place"),l.a.createElement("input",{type:"submit",value:"Add New Trip",onSubmit:f}))))}),y=(n(91),function(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),r=(n[0],n[1]),o=Object(a.useState)([]),i=Object(c.a)(o,2),s=i[0],u=i[1];Object(a.useEffect)((function(){for(var t=[],n=0;n<e.userInformation.length;n++){t.push([]);var a,l=Object(f.a)(e.userInformation[n].places);try{for(l.s();!(a=l.n()).done;){var o=a.value;t[n].push(escape(o[0]))}}catch(h){l.e(h)}finally{l.f()}}r(t);for(var c=[],i=[],s=function(n){c.push([]);var a=t[n].map((function(t,a){return m.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(t,".json?access_token=pk.eyJ1IjoiamVzc2ljYWxpYW5nIiwiYSI6ImNrY2I3N25wazFpOGEzMHF0dHY3aHNkOWUifQ.ItSK1BDpYydbUVyDPvdj6A")).then((function(t){c[n].push([t.data.features[0].center,e.userInformation[n].places[a][1]])})).catch((function(e){console.log(e)}))}));i.push.apply(i,Object(d.a)(a))},p=0;p<t.length;p++)s(p);Promise.all(i).then((function(){u(c)}))}),[e.userInformation]);return l.a.createElement("div",{id:"dashboard"},l.a.createElement("header",null,l.a.createElement("section",null,e.currentUser),l.a.createElement("h1",null,"the travel mApp"),l.a.createElement("section",null,l.a.createElement("button",{onClick:e.onLogoutCallback},"Log Out"))),l.a.createElement("main",{id:"dashboard__main_content"},l.a.createElement(v,{userInformation:e.userInformation,coordinates:s}),l.a.createElement(j,{addNewTripCallback:function(t,n){m()({method:"post",url:"https://the-travel-mapp.herokuapp.com/trips",params:{username:e.currentUser,date:"".concat(t.month,"-").concat(t.year),title:t.title,places:n},headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Auth-Token, Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With"}}).then((function(t){console.log(t.data.trips),e.setUserInformationCallback(t.data.trips)})).catch((function(e){console.log(e)}))}}),l.a.createElement(T,{userInformation:e.userInformation,editTripCallback:function(t,n,a){console.log(t),console.log(n),console.log(a),m()({method:"patch",url:"https://the-travel-mapp.herokuapp.com/trips",params:{index:a,username:e.currentUser,date:t.date,title:t.title,places:n},headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Auth-Token, Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With"}}).then((function(t){console.log(t.data.trips),e.setUserInformationCallback(t.data.trips)})).catch((function(e){console.log(e)}))},deleteTripCallback:function(t){m()({method:"delete",url:"https://the-travel-mapp.herokuapp.com/trips",data:{username:e.currentUser,key:t},headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Auth-Token, Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With"}}).then((function(t){console.log(t.data.trips),e.setUserInformationCallback(t.data.trips)})).catch((function(e){console.log(e)}))}})))}),w=(n(92),n(93),function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(null),i=Object(c.a)(o,2),s=i[0],u=i[1];return l.a.createElement("div",null,""===n&&l.a.createElement(p,{setUserCallback:r,setUserInformationCallback:u}),""!==n&&null!==s&&l.a.createElement(y,{onLogoutCallback:function(e){e.preventDefault(),r("")},currentUser:n,setUserInformationCallback:u,userInformation:s}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.668bb9e1.chunk.js.map